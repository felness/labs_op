#include <iostream>
#include <fstream>
#include <sstream>
#include <vector>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
using namespace std;
// –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –¥–æ—á–µ—Ä–Ω–µ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
void childProcess(const vector<float>& numbers, const string& filename) {
    float sum = 0;

    // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—É–º–º—ã —á–∏—Å–µ–ª
    for (float number : numbers) {
        sum += number;
    }

    // –ó–∞–ø–∏—Å—å —Å—É–º–º—ã –≤ —Ñ–∞–π–ª
    ofstream file(filename);
    if (file.is_open()) {
        file << "Sum: " << sum << endl;
        file.close();
    } else {
        cerr << "Unable to open the file." << endl;
    }
}

int main() {
    string input;
    vector<float> numbers;

    cout << "Enter numbers (separated by spaces) followed by '<endine>': ";
    getline(cin, input);

    istringstream iss(input);
    float number;
    while (iss >> number) {
        numbers.push_back(number);
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
    pid_t pid = fork();

    if (pid == -1) {
        cerr << "Failed to fork a child process." << endl;
        return 1;
    } else if (pid == 0) {
        // –î–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
        childProcess(numbers, "sum.txt");
    } else {
        // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å
        wait(NULL); // –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
        cout << "Sum calculation completed." << endl;
    }

    return 0;
}
// ```

// –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–≤–æ–¥ —á–∏—Å–µ–ª, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏, –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è `<endine>`. –ó–∞—Ç–µ–º –æ–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `fork()`. –í –¥–æ—á–µ—Ä–Ω–µ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `childProcess`, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—É–º–º—ã —á–∏—Å–µ–ª –∏ –∑–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —Ñ–∞–π–ª "sum.txt". –í —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `wait(NULL)`, —á—Ç–æ–±—ã –æ–∂–∏–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

// –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ñ–∞–π–ª "sum.txt" –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ç–æ–º –∂–µ –∫–∞—Ç–∞–ª–æ–≥–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã.
// üì¨ –î–ª—è —Å–º–µ–Ω—ã —Ç–µ–º—ã —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏–ª–∏ —Ä–µ–∂–∏–º–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ –ª–µ–≥–∫–æ –Ω–∞—á–∞—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –¥—Ä—É–≥–æ–π —Ç–µ–º—ã.